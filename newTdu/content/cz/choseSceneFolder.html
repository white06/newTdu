<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" style="height: 100%">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Title</title>
    <link rel="stylesheet" href="../../js/layui/css/layui.css">
    <script src="../../js/layui/layui.js"></script>
    <script src="../../js/custom/jquery-1.8.3.min.js"></script>
    <style>
        body {
            height: 100%;
            width: 100%;
            background: rgba(30,37,54,1);
        }

        .layui-form-item {
            margin: 0 0;
        }
    </style>
    <script>


        var index = parent.layer.getFrameIndex(window.name);
        var	subid =parent.layer.subid;
        var lei = parent.layer.lei;
        var userId = parent.layer.userId;
        $(document).ready(function(){
            var str = GetRequest();
            eval(str);
            subid = str.subid;
            lei = str.lei;
            userId = str.userId;
            console.log(" subid : "+subid+" lei :"+lei+" userId : "+userId)

        })
        function GetRequest() {
            var url = location.search; //获取url中"?"符后的字串
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        }
    </script>
    <script src="../../js/api.js"></script>
</head>
<body>
<div style="width: 100%;height: 20%;text-align: center;">
    <fieldset class="layui-elem-field layui-field-title"
              style="margin: 0 0;display: inline-block;vertical-align: middle;color: white;">
        <legend>新增文件夹/场景</legend>
    </fieldset>
    <span style="display: inline-block;vertical-align: middle;height: 100%;"></span>
</div>
<div class="layui-form" style="width: 80%;height: 60%;;margin: 0 auto;text-align: center;">

    <div class="layui-form-item" style="display: inline-block;vertical-align: middle;width: 100%;height: 30%;margin-top: 10%;">
        <div class="layui-input-block" style="color: white;margin: 0 0;">
            <input type="radio" lay-filter="aaa" name="sex" value="1" title="新增文件夹" checked>
            <input type="radio" lay-filter="aaa" name="sex" value="0" title="新增场景">
        </div>
        <div  id="wenjian" class="layui-form-item" style="display: inline-block;vertical-align: middle;width: 60%;height: 30%;margin-top: 5%;">
            <div class="layui-input-block" style="color: white;margin: 0 0;">
                <input id="name" type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入文件夹名称" class="layui-input">
            </div>
        </div>
    </div>

    <span style="display: inline-block;vertical-align: middle;height: 100%;"></span>
</div>
<div style="width: 80%;height: 20%;text-align: center;margin: 0 auto;">
    <div style="display: inline-block;vertical-align: middle;">
        <button onclick="getLingk()" style="width: 40%;margin-right: 10px;" class="layui-btn" >确认</button>
        <button onclick="returnPage()" style="width: 40%;" class="layui-btn">取消</button>
    </div>
    <span style="display: inline-block;vertical-align: middle;height: 100%;"></span>
</div>
</body>
<script>
    layui.use(['layer', 'table', 'element','form'], function () {
        var layer = layui.layer //弹层
            , table = layui.table //表格
            , form = layui.form
            , element = layui.element //元素操作


        form.on("radio(aaa)", function (data) {
            var val = data.value;
            //alert(val);
            if(val=="1"){
                //console.log("--")
                $("#wenjian").show()
            }else if(val=="0"){
                //console.log("**")
                $("#wenjian").hide()
            }
        });
        //常规用法
        window.returnPage=function () {
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index); //再执行关闭
            //layer.close(index);
        }
        window.getLingk=function () {
            var flag = $('input[name="sex"]:checked').val();
            console.log(flag);
            if(flag=="0"){

                /*
                *   KnowledgeId1 = str.KnowledgeId;
                    treeId1 = str.treeId;
                    lei1 = str.lei;
                    userKey = str.userId
                * */
                window.location.href = '../../model/ChooseModel_oldFolder.html?subid='+subid+'&lei='+lei+'&userId='+userId;
            }else{
                var name=$("#name").val();
                console.log(name);
                if(name==""){
                    layer.msg("请先填写文件夹名称!")
                    return
                }else{
                    var str = "random=" + Math.random() + "&Content=" + name + "&id=" + "" + "&lei=" + lei + "&subid=" + subid;
                    $.ajax({
                        type: "Post",
                        url: houtaiurl+"DevelopScenesController/AllinsScenes.action",
                        data: str,
                        async: false,
                        success: function (data) {
                            parent.layer.close(index);
                        }
                    });
                }
            }
        }

    })
</script>
</html>